<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
    <!-- Add any additional styles or libraries here -->
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table,
        th,
        td {
            border: 1px solid #ddd;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        button {
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>URL Shortener</h1>

    <form id="shortenForm">
        <label for="originalUrl">Enter URL to Shorten:</label>
        <input type="url" id="originalUrl" name="originalUrl" required>
        <button type="submit">Shorten URL</button>
    </form>

    <h2>Created URLs</h2>
    <table id="urlTable">
        <thead>
            <tr>
                <th>Title</th>
                <th>Date Created</th>
                <th>Expiration Date</th>
                <th>Original URL</th>
                <th>Shortened URL</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <!-- URL entries will be added here dynamically -->
        </tbody>
    </table>

    <script>
        document.getElementById('shortenForm').addEventListener('submit', function (event) {
            event.preventDefault();

            // Fetch the backend to shorten the URL
            // Example: fetch('/api/shorten', { method: 'POST', body: JSON.stringify({ url: document.getElementById('originalUrl').value }) })
            // Handle the response and update the UI (add a new row to the table)
        });

        // Function to copy shortened URL to clipboard
        function copyToClipboard(url) {
            const el = document.createElement('textarea');
            el.value = url;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            alert('Shortened URL copied to clipboard!');
        }

        // Function to delete a URL entry
        function deleteUrl(id) {
            // Fetch the backend to delete the URL
            // Example: fetch(`/api/delete/${id}`, { method: 'DELETE' })
            // Handle the response and update the UI (remove the corresponding row from the table)
        }

        // Example: Dynamically add a row to the table (replace with actual data from the backend)
        const tableBody = document.querySelector('#urlTable tbody');
        const newRow = tableBody.insertRow();
        const shortenedUrl = 'https://example.com/short';
        const uniqueIdentifier = 'unique_identifier';

        newRow.innerHTML = `
            <td>Title</td>
            <td>Date Created</td>
            <td>Expiration Date</td>
            <td>Original URL</td>
            <td>
                ${shortenedUrl}
                <button onclick="copyToClipboard('${shortenedUrl}')">Copy</button>
            </td>
            <td>
                <button onclick="deleteUrl('${uniqueIdentifier}')">Delete</button>
            </td>
        `;
        // Add the dataset-id attribute to store the unique identifier for this entry
        newRow.dataset.id = uniqueIdentifier;
    </script>
</body>

</html>